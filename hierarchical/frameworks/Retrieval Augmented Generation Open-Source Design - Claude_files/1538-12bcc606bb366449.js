"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1538],{94354:function(e,t,n){n.d(t,{$H:function(){return x},$Y:function(){return Q},CJ:function(){return T},Gk:function(){return N},Ke:function(){return S},Ls:function(){return I},PD:function(){return A},QR:function(){return k},Rq:function(){return w},W:function(){return z},_C:function(){return P},cj:function(){return j},gK:function(){return q},hA:function(){return C},j1:function(){return U},j7:function(){return M},jl:function(){return K},lg:function(){return O},o:function(){return b},yj:function(){return E},zU:function(){return B}});var r=n(6700),a=n(83041),i=n(16096),u=n(17179),s=n(35146),o=n(36665),l=n(28505),c=n(84983),d=n(74822),v=n(11064),g=n.n(v),_=n(99733),p=n.n(_),m=n(54603),h=n(7653),f=n(80248),y=n(50504);let b=(e,t)=>{let{activeOrganization:n}=(0,i.useCurrentAccount)(),r=null==n?void 0:n.uuid;return(0,a.WE)("/api/organizations/".concat(r,"/chat_conversations/").concat(e,"/chat_messages/").concat(t,"/debug"),{queryKey:[s.Ep,{orgUUID:r},{conversationUuid:e},{messageUuid:t}],enabled:!!t})},C=function(e){let{suppressError:t,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:r}=(0,i.useCurrentAccount)(),u=null==r?void 0:r.uuid;return(0,a.WE)("/api/organizations/".concat(null!=u?u:"","/chat_conversations/").concat(e),{queryKey:[s.ph,{orgUUID:u},{uuid:e}],staleTime:3e5,enabled:!!u&&!!e&&n,select:e=>({...e,chat_messages:p()(e.chat_messages,"index")}),meta:{noToast:t}})},w=e=>{let t=(0,c.useQueryClient)(),{activeOrganization:n}=(0,i.useCurrentAccount)(),{value:r}=(0,f.useGate)("apps_edit_messages"),a=null==n?void 0:n.uuid,[u,l]=(0,h.useReducer)(e=>e+1,0),v=(0,o.B)([r?s.I8:s.ph,{orgUUID:a},{uuid:e}]),g=(0,h.useMemo)(()=>t.getQueryData(v),[t,v,e,u]);return(0,h.useEffect)(()=>t.getQueryCache().subscribe(e=>{"updated"===e.type&&"success"===e.action.type&&(0,d._x)({queryKey:v},e.query)&&l()}),[t,l,v]),{data:g}},k=()=>{let{activeOrganization:e}=(0,i.useCurrentAccount)(),t=null==e?void 0:e.uuid;return(0,a.WE)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),{queryKey:[s.tv,{orgUUID:t}],staleTime:3e5,enabled:!!t,select:e=>p()(e,e=>new Date(e.updated_at)).reverse()})},P=function(e){let{suppressError:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,i.useCurrentAccount)(),r=null==n?void 0:n.uuid,u=(0,h.useRef)([]),o="/api/organizations/".concat(null!=r?r:"","/chat_conversations/").concat(e,"?tree=True&rendering_mode=raw"),l=(0,a.WE)(o,{queryKey:[s.I8,{orgUUID:r},{uuid:e}],staleTime:3e5,enabled:!!r&&!!e,meta:{noToast:t}},y.fX),c=(0,h.useMemo)(()=>{if(!l.data)return u.current=[],u.current;let e=(0,y.kX)(l.data);if(e.length!==u.current.length||e.some((e,t)=>{var n;return e.uuid!==(null===(n=u.current[t])||void 0===n?void 0:n.uuid)}))return u.current=e,u.current;for(let t=0;t<e.length;t++)g()(e[t],u.current[t])||(u.current[t]=e[t]);return u.current},[l.data]);return{...l,currentPath:c}},x=(e,t)=>{let{mutate:n}=Q(),r=(0,m.useRouter)(),a=t||(0,l.H)();return(0,h.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:void 0,controlsOpen:!1};n({uuid:a,name:"",model:t.model});let i="/chat/".concat(a).concat(t.controlsOpen?"?controls=1":"");r[e](i)},[n,r,e,a])},Q=()=>{let{activeOrganization:e}=(0,i.useCurrentAccount)(),t=null==e?void 0:e.uuid,n=(0,c.useQueryClient)(),{value:r}=(0,f.useGate)("apps_edit_messages"),u=[s.tv,{orgUUID:t}],o=e=>[s.ph,{orgUUID:t},{uuid:e}],l=e=>[s.I8,{orgUUID:t},{uuid:e}];return(0,a.uC)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),"POST",{enabled:!!t,async onMutate(e){let t=o(e.uuid),r={summary:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),...e};await Promise.all([n.cancelQueries({queryKey:u}),n.cancelQueries({queryKey:t})]),n.setQueryData(u,e=>e&&[r,...e]),n.setQueryData(t,e=>({...e||{},...r,chat_messages:(null==e?void 0:e.chat_messages)||[]}))},onSuccess:e=>{n.setQueryData(u,t=>{if(!t)return;let n=t.findIndex(t=>t.uuid===e.uuid);if(-1===n)return t;let r=[...t];return r.splice(n,1,e),r}),r?n.setQueryData(l(e.uuid),t=>({...t||{},...e,chat_messages:(null==t?void 0:t.chat_messages)||[],messageByUuid:new Map,parentByChildUuid:new Map,childrenByParentUuid:new Map,selectedChildByUuid:new Map})):n.setQueryData(o(e.uuid),t=>({...t||{},...e,chat_messages:(null==t?void 0:t.chat_messages)||[]}))},onError(e,t){n.setQueryData(u,e=>null==e?void 0:e.filter(e=>e.uuid!==t.uuid)),n.setQueryData(o(t.uuid),void 0)}})},U=()=>{let{activeOrganization:e}=(0,i.useCurrentAccount)(),t=null==e?void 0:e.uuid,{value:n}=(0,f.useGate)("apps_edit_messages"),r=(0,c.useQueryClient)();return(0,a.Ne)(e=>"/api/organizations/".concat(null!=t?t:"","/chat_conversations/").concat(e),"DELETE",(e,t)=>{if(!t)return[];let n=t.findIndex(t=>t.uuid===e);if(!(n>-1))return t;{let e=[...t];return e.splice(n,1),e}},{enabled:!!t,queryKey:[s.tv,{orgUUID:t}],onSuccess:async(e,a)=>{await r.invalidateQueries([n?s.I8:s.ph,{orgUUID:t},{uuid:a}])}})},E=e=>{let{activeOrganization:t}=(0,i.useCurrentAccount)(),n=null==t?void 0:t.uuid,r=null==t?void 0:t.capabilities.includes("raven");return(0,a.WE)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/shares"),{queryKey:[s.zb,{orgUUID:n,conversationUUID:e}],enabled:!!n&&r,staleTime:3e5})},T=e=>{let{activeOrganization:t}=(0,i.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,a.WE)("/api/organizations/".concat(n,"/chat_snapshots/").concat(e),{retry:!1,refetchInterval:!1,enabled:!!e,queryKey:[s.ld,{orgUUID:n,snapshotUUID:e}]})},A=e=>{let{activeOrganization:t}=(0,i.useCurrentAccount)(),n=null==t?void 0:t.uuid,r=(0,c.useQueryClient)(),{data:u}=w(e);return(0,a.Ne)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/share"),"POST",(e,t)=>{let n=null==u?void 0:u.chat_messages.findIndex(e=>e.uuid===(null==u?void 0:u.current_leaf_message_uuid));if(!n)return t;let r={uuid:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),snapshot_name:null==u?void 0:u.name,last_message_index:n,...e};return t?[...t,r]:[r]},{onSuccess:t=>{r.invalidateQueries([s.zb,{orgUUID:n,conversationUUID:e}]),r.invalidateQueries([s.ld,{orgUUID:n,snapshotUUID:t.uuid}]),r.invalidateQueries([s.VH,{orgUUID:n}])},queryKey:[s.zb,{orgUUID:n,conversationUUID:e}],meta:{errorMessage:"There was an error while trying to share the conversation. Please try again."}})},I=(e,t)=>{let{activeOrganization:n}=(0,i.useCurrentAccount)(),r=null==n?void 0:n.uuid,u=(0,c.useQueryClient)();return(0,a.Ne)("/api/organizations/".concat(r,"/share/").concat(t),"DELETE",(e,n)=>{if(!n)return[];let r=n.findIndex(e=>e.uuid===t);if(!(r>-1))return n;{let e=[...n];return e.splice(r,1),e}},{enabled:!!r,queryKey:[s.zb,{orgUUID:r,conversationUUID:e}],onSuccess:()=>{u.invalidateQueries([s.zb,{orgUUID:r,conversationUUID:e}]),u.invalidateQueries([s.ld,{orgUUID:r,snapshotUUID:t}]),u.invalidateQueries([s.VH,{orgUUID:r}])},meta:{errorMessage:"There was an error while trying to unshare the conversation. Please try again."}})},S=(e,t,n)=>{var o,l,d;let{track:v}=(0,r.z$)(),g=null!==(l=null===(o=(0,u.T)())||void 0===o?void 0:o.preview_feature_uses_artifacts)&&void 0!==l&&l,{activeOrganization:_}=(0,i.useCurrentAccount)(),p=null==_?void 0:_.uuid,{value:m}=(0,f.useGate)("apps_edit_messages"),h=(0,c.useQueryClient)(),y=[m?s.I8:s.ph,{orgUUID:p},{uuid:e}];return(0,a.uC)("/api/organizations/".concat(null!=p?p:"","/chat_conversations/").concat(e,"/chat_messages/").concat(null!==(d=t.uuid)&&void 0!==d?d:"","/chat_feedback"),t.chat_feedback?"PUT":"POST",{enabled:!!p,meta:{errorMessage:"We could not save your feedback. Please try again later."},onSuccess(){var r;v({event_key:"claudeai.conversation.feedback.sent",message_uuid:t.uuid,conversation_uuid:e,artifacts_enabled:g,conversationHasArtifacts:n,type:null===(r=t.chat_feedback)||void 0===r?void 0:r.type}),h.invalidateQueries(y)}})},D=()=>{let e=(0,c.useQueryClient)(),{activeOrganization:t}=(0,i.useCurrentAccount)(),n=null==t?void 0:t.uuid,{value:r}=(0,f.useGate)("apps_edit_messages");return(0,h.useCallback)((t,a)=>{t&&(e.setQueryData([r?s.I8:s.ph,{orgUUID:n},{uuid:t}],e=>e&&{...e,...a}),e.setQueryData([s.tv,{orgUUID:n}],e=>null==e?void 0:e.map(e=>e.uuid!==t?e:{...e,...a})))},[n,e,r])},z=e=>{let t=(0,c.useQueryClient)(),{activeOrganization:n}=(0,i.useCurrentAccount)(),r=null==n?void 0:n.uuid,{value:u}=(0,f.useGate)("apps_edit_messages"),o=D();return(0,a.uC)("/api/organizations/".concat(r,"/chat_conversations/").concat(e),"PUT",{onMutate:n=>{var a;let{name:i}=n,l=t.getQueryData([u?s.I8:s.ph,{orgUUID:r},{uuid:e}]);return o(e,{name:i}),{oldTitle:null!==(a=null==l?void 0:l.name)&&void 0!==a?a:""}},onError(t,n,r){r&&o(e,{name:r.oldTitle})}})},B=e=>{let t=(0,c.useQueryClient)(),{activeOrganization:n}=(0,i.useCurrentAccount)(),r=null==n?void 0:n.uuid,{value:u}=(0,f.useGate)("apps_edit_messages"),o=D();return(0,a.uC)("/api/organizations/".concat(r,"/chat_conversations/").concat(e),"PUT",{onMutate:n=>{let{model:a}=n,i=t.getQueryData([u?s.I8:s.ph,{orgUUID:r},{uuid:e}]);return o(e,{model:a}),{oldModel:null==i?void 0:i.model}},onError(t,n,r){r&&o(e,{model:r.oldModel})}})},M=e=>{let t=D(),{activeOrganization:n}=(0,i.useCurrentAccount)();return(0,a.uC)("/api/organizations/".concat(null==n?void 0:n.uuid,"/chat_conversations/").concat(e,"/title"),"POST",{onSuccess(n){let{title:r}=n;t(e,{name:null!=r?r:""})},meta:{noToast:!0}})};function O(e){return e.text+e.attachments.map(e=>e.extracted_content).join(" ")}let q=e=>{let{activeOrganization:t}=(0,i.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,a.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/stop_response"),"POST")},K=e=>{let{activeOrganization:t}=(0,i.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,a.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/current_leaf_message_uuid"),"PUT")},N=e=>{let{activeOrganization:t}=(0,i.useCurrentAccount)(),n=(0,c.useQueryClient)(),r=null==t?void 0:t.uuid;return(0,a.Ne)("/api/organizations/".concat(r,"/chat_conversations/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{n.invalidateQueries([s.tv,{orgUUID:r}]),n.invalidateQueries([s.I8,{orgUUID:r},{uuid:e}])},queryKey:[s.I8,{orgUUID:r},{uuid:e}]})},j=()=>{let{data:e,isLoading:t}=k();return{data:null==e?void 0:e.filter(e=>e.is_starred),isLoading:t}}},50504:function(e,t,n){n.d(t,{FC:function(){return u},HX:function(){return g},QC:function(){return o},fX:function(){return v},kX:function(){return p},mj:function(){return m},vv:function(){return _},wZ:function(){return s}});var r=n(43316),a=n(88253),i=n.n(a);let u="new-assistant-message-uuid",s="new-human-message-uuid",o="00000000-0000-4000-8000-000000000000";function l(e,t){let n=e.get(t);if(void 0===n){let e=Error("Key not found: ".concat(t));throw(0,r.Tb)(e),e}return n}let c=(e,t)=>{let n=null!=t?t:e.current_leaf_message_uuid;if(!n)return e;for(;n!==o;){var r;let t=l(e.parentByChildUuid,n),a=null===(r=l(e.childrenByParentUuid,t))||void 0===r?void 0:r.indexOf(n);e.selectedChildByUuid.set(t,a),n=t}return{...e,current_leaf_message_uuid:t}},d=e=>{var t,n,r;let a=new Map,i=new Map,u=new Map,s=new Map,l=new Map;if(0===e.chat_messages.length)return{messageByUuid:i,parentByChildUuid:u,childrenByParentUuid:s,selectedChildByUuid:l};for(let t of e.chat_messages)a.set(t.index,t),i.set(t.uuid,t);for(let t of e.chat_messages){let e=t.parent_message_uuid;if(!e){let r=t.index-1;for(;!e&&r>=0;)e=null===(n=a.get(r))||void 0===n?void 0:n.uuid,r--}e=null!=e?e:o,u.set(t.uuid,e),s.set(e,(null!==(r=s.get(e))&&void 0!==r?r:[]).concat(t.uuid)),l.set(e,0)}if(!(null===(t=s.get(o))||void 0===t?void 0:t[0]))throw Error("No root message found");return{messageByUuid:i,parentByChildUuid:u,childrenByParentUuid:s,selectedChildByUuid:l}},v=e=>{let t={...e,...d(e)};return t.current_leaf_message_uuid||c(t),c(t,e.current_leaf_message_uuid)},g=e=>{let t=Array.from(e.messageByUuid.values()).map(e=>e.index);return 0===t.length?-1:Math.max(...t)},_=(e,t)=>{for(let r of(e.chat_messages=e.chat_messages.concat(t),t)){var n;if(!r.parent_message_uuid)throw Error("Parent UUID required");let t=r.parent_message_uuid;e.messageByUuid.set(r.uuid,r),e.parentByChildUuid.set(r.uuid,t);let a=null!==(n=e.childrenByParentUuid.get(t))&&void 0!==n?n:[];a.push(r.uuid),e.childrenByParentUuid.set(t,a),e.selectedChildByUuid.set(t,a.length-1)}return c(e,t[t.length-1].uuid)},p=(e,t)=>{let n=[],r=null!=t?t:o;for(;e.childrenByParentUuid.has(r);){let t=l(e.childrenByParentUuid,r);if(0===t.length)break;let a=l(e.selectedChildByUuid,r),i=l(e.messageByUuid,t[a]);n.push({...i,parent_message_uuid:r,nOptions:t.length,selectedOption:a}),r=i.uuid}return n};function m(e,t,n){var r;let a=l(e.parentByChildUuid,t.uuid),u=l(e.childrenByParentUuid,a),s=i()((null!==(r=t.selectedOption)&&void 0!==r?r:0)+n,0,u.length-1);e.selectedChildByUuid.set(a,s);let o=p(e,a);return c(e,o[o.length-1].uuid)}},6700:function(e,t,n){n.d(t,{YZ:function(){return d},z$:function(){return c}});var r=n(28648),a=n(7653),i=n(83041),u=n(11492),s=n(16096),o=n(89937);let l={"ts.eu_election_banner.shown":{version:1,data_team_tag:"ts"},"ts.banner.shown":{version:1,data_team_tag:"ts"},"billing.credit_card.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.completed":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire_manual.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.completed":{version:1,data_team_tag:"billing_funnel"},"evals.revision.created":{version:1},"evals.show_prompt_preview.toggled":{version:1},"evals.run_all.submitted":{version:1},"evals.test_case.run.submitted":{version:1},"evals.test_case.run.completed":{version:1},"evals.test_case.run.failed":{version:1},"evals.test_case.create.submitted":{version:1},"evals.test_case.delete.submitted":{version:1},"evals.select_revision.clicked":{version:1},"evals.test_case.update_rating.submitted":{version:1},"evals.test_case.import.show_modal.clicked":{version:1},"evals.test_case.import.browse.clicked":{version:1},"evals.test_case.import.success":{version:1},"evals.comparison.add_button.clicked":{version:1},"evals.comparison.remove_button.clicked":{version:1},"evals.comparison.other_revision.selected":{version:1},"test_case_generator.generate.started":{version:1},"test_case_generator.edit_logic.clicked":{version:1},"metaprompter.modal.loaded":{version:1},"metaprompter.example.selected":{version:1},"metaprompter.generate.started":{version:1},"metaprompter.generate.stop.attempted":{version:1},"metaprompter.generate.finished":{version:1},"metaprompter.start_editing.clicked":{version:1},"onboarding.invite_accept_page.invite_accept.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.invite_reject.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.submitted":{version:1,data_team_tag:"onboarding_funnel"},"workbench.tab_selection.clicked":{version:1},"workbench.variables_pane.loaded":{version:1},"claudeai.projects.list_view.switched":{version:1},"claudeai.conversation.suggestion.applied":{version:1},"claudeai.conversation.recent.opened":{version:1},"claudeai.projects.activity.shared_conversation.opened":{version:1},"claudeai.settings.preview_feature.toggled":{version:1},"claudeai.settings.preview_feature.opened":{version:1},"claudeai.support.opened":{version:1},"claudeai.conversation.feedback.sent":{version:1}},c=()=>{let e=(0,o.K)(),{account:t,activeOrganization:n,isLoading:r}=(0,s.useCurrentAccount)(),i=(0,u.useIsClaudeDot)(),c=(0,a.useCallback)(a=>{if(r)return;let{event_key:u,...s}=a;return e.track(u,{account_uuid:null==t?void 0:t.uuid,organization_uuid:null==n?void 0:n.uuid,billing_type:null==n?void 0:n.billing_type,surface:i?"claude-ai":"console",...l[u],...s})},[e,t,n,i,r]);return(0,a.useMemo)(()=>({track:c}),[c])},d=(e,t,n,a)=>{let u=c(),{onSuccess:s,onError:o,...l}=a||{};return(0,i.uC)(t,n,{onSuccess(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];u.track({event_key:e,result:"success"}),null==s||s(...n)},onError(t){let n;for(var a=arguments.length,i=Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];t instanceof r.Hx&&(n=t.type),u.track({event_key:e,result:"failure",failure_reason:n}),null==o||o(t,...i)},...l})}},83243:function(e,t,n){var r,a;n.d(t,{DF:function(){return u},iw:function(){return i}}),(a=r||(r={})).GoogleTagManager="google_tag_manager",a.GoogleEnhancedConversions="google_enhanced_conversions";let i={analytics:!1,marketing:!1},u={analytics:!0,marketing:!0}},17179:function(e,t,n){n.d(t,{I:function(){return s},T:function(){return u}});var r=n(27573),a=n(7653);let i=(0,a.createContext)(null),u=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useCurrentConversationSettings must be used within a CurrentConversationSettingsProvider");return e},s=e=>{let{children:t,settings:n}=e;return(0,r.jsx)(i.Provider,{value:n,children:t})}},89937:function(e,t,n){n.d(t,{K:function(){return u}});var r=n(80248),a=n(11492),i=n(21728);let u=()=>{let{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=(0,a.useConfiguration)(),{value:u}=(0,r.useGate)("requires_explicit_consent");return i.u.loadIfNecessary({segmentKey:e,segmentCdnHost:t,segmentApiHost:n,requiresExplicitConsent:u})}},21728:function(e,t,n){n.d(t,{u:function(){return g}});var r=n(14983),a=n(70478),i=n(39625),u=n(43316),s=n(27794),o=n.n(s),l=n(83243),c=n(23532);class d{constructor(){this.name="RemoveUserAgent",this.version="1.0.0",this.type="before",this.isLoaded=()=>!0,this.load=()=>Promise.resolve(),this.redactPiiFromContext=e=>{var t;return(null==e?void 0:null===(t=e.event)||void 0===t?void 0:t.context)&&(delete e.event.context.userAgent,delete e.event.context.email,e.event.context.ip="REDACTED"),e},this.track=this.redactPiiFromContext,this.identify=this.redactPiiFromContext,this.page=this.redactPiiFromContext,this.group=this.redactPiiFromContext,this.alias=this.redactPiiFromContext,this.screen=this.redactPiiFromContext}}class v{constructor(){this.consentChangedCallback=o(),this.preferences=v.mapConsentPreferences(l.iw),this.analyticsBrowser=null,this.loadIfNecessary=e=>{let{segmentKey:t,segmentCdnHost:n,segmentApiHost:r,requiresExplicitConsent:a}=e;return this.analyticsBrowser||(this.analyticsBrowser=new i.b,this.loadInitialConsentPreferences(a),this.wrapAnalyticsWithConsent(this.analyticsBrowser).load({writeKey:t,cdnURL:"https://".concat(n),plugins:[new d]},{disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:"".concat(r,"/v1"),protocol:"https"}}}).catch(e=>{(0,u.Tb)(e,{extra:{message:"Failed to load analytics"}})})),this.analyticsBrowser},this.registerOnConsentChanged=e=>{this.consentChangedCallback=e},this.getCategories=()=>this.preferences,this.loadInitialConsentPreferences=e=>{let t;try{t=c.browserCookieStore.get(r.cn.CONSENT_PREFERENCES)}catch(e){(0,u.Tb)(e,{extra:{message:"Failed to get consent preferences cookie"}})}if(t)try{let e=JSON.parse(t);this.preferences=v.mapConsentPreferences(e)}catch(e){console.warn("Malformed consent preferences cookie",t)}else e||(this.preferences=v.mapConsentPreferences(l.DF))},this.updateCategories=e=>{this.preferences=v.mapConsentPreferences(e),this.consentChangedCallback(this.preferences)},this.wrapAnalyticsWithConsent=e=>(0,a.K)({registerOnConsentChanged:this.registerOnConsentChanged,getCategories:this.getCategories})(e)}}v.mapConsentPreferences=e=>({marketing:e.marketing,analytics:e.analytics,necessary:!0});let g=new v},2715:function(e,t,n){var r=n(27573),a=n(44115),i=n(7653);t.Z=(0,i.memo)(function(e){let{size:t="md",fullscreen:n=!1,inheritColor:i}=e;return(0,r.jsx)("div",{className:(0,a.Z)(n?"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,r.jsx)("div",{className:(0,a.Z)("sm"===t&&"h-4 w-4 border-2","md"===t&&"h-20 w-20 border-8",i?"border-current":"border-border-200","text-secondary inline-block animate-spin rounded-full border-solid border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"),role:"status",children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})})})},36665:function(e,t,n){n.d(t,{B:function(){return a}});var r=n(7653);function a(e){let t=JSON.stringify(e);return(0,r.useMemo)(()=>e,[t])}},28505:function(e,t,n){n.d(t,{H:function(){return r}});let r=()=>void 0===crypto.randomUUID?"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,e=>{let t=parseInt(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):crypto.randomUUID()}}]);